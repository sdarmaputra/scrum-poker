(function(){"use strict";const a="cards",b="types",c=(a,b)=>{const c=a.length,d=b.length;return!(c!==d)&&a.reduce((a,c,d)=>b[d]===c&&a,!0)},d={cards:[],selectedCardType:null,selectedCardIndex:null},e={standard:{cards:["0","1/2",1,2,3,5,8,13,20,40,100,"?","&infin;","&#x2615;"]},fibonacci:{cards:["0",1,2,3,5,8,13,21,34,55,89,144,"?","&infin;","&#x2615;"]}},f=document.getElementById("app"),g=new function(c){this.doc=c;const d=a=>{const b=this.doc.createElement(a);return b},e=(a,b,c)=>{const e=d("ul");return e.className=b,a.forEach((a,b)=>{let f=d("li");f.innerHTML=a,"function"==typeof c&&(f=c(f,b)),e.append(f)}),e},f=a=>{const b=d("section");return b.id=a,b},g=(a,b={},c)=>{const d=Object.keys(b);return d.forEach(d=>{let e=b[d];"function"==typeof c&&(e=a=>c(a,b[d])),a.addEventListener(d,e)}),a};return{createSection:f,createCardsSection:(b,c={})=>{const d=f(a),h=e(b,"card-list",(a,b)=>(a.className="card-list__item",a=g(a,c,(a,c)=>{c(b)}),a));return d.append(h),d},createTypesSection:(a,c,h={})=>{const i=f(b),j=e(a,"type-list",a=>{const b=d("button"),e=a.innerHTML;return b.innerHTML=e,a.className=`type-list__item ${e===c?"is-active":""}`,a.innerHTML=null,a.append(b),a=g(a,h,(a,c)=>{c(b.innerHTML)}),a});return i.append(j),i},createSelectedCard:(a,b)=>{const c=d("div"),e=d("div"),f=d("button");return e.className="main-card",e.innerHTML=a,"function"==typeof b&&e.addEventListener("click",a=>{b(),a.stopPropagation()}),c.append(e),c}}}(window.document),h=new function(d,e){this.appRoot=d,this.componentFactory=e,this.cardTypes=[],this.currentCards=[],this.cardEventListeners={},this.cardTypeEventListeners={},this.selectedType=null,this.selectedValue=null,this.selectedValueShown=!0,this.selectedCardSection=null;const f=a=>this.appRoot.append(a),g=a=>this.appRoot.removeChild(a),h=a=>this.appRoot.querySelector(a),i=(a,b)=>{a&&g(a),f(b)},j=(a,b)=>{const c=h(a);i(c,b)},k=()=>j(`section#${a}`,this.componentFactory.createCardsSection(this.currentCards,this.cardEventListeners)),l=()=>j(`section#${b}`,this.componentFactory.createTypesSection(this.cardTypes,this.selectedType,this.cardTypeEventListeners)),m=()=>{let a=null;if(!this.selectedCardSection){const a=this.componentFactory.createSection("selectedCard");this.appRoot.append(a),this.selectedCardSection=a}if(this.selectedCardSection.innerHTML=null,this.selectedValue){const b=this.selectedValueShown?this.selectedValue:"&#x1F914";a=this.componentFactory.createSelectedCard(b,()=>o(!this.selectedValueShown)),this.selectedCardSection.append(a),this.selectedCardSection.addEventListener("click",n)}const b=[this.selectedValue?"is-active":"",this.selectedValueShown?"is-shown":""].join(" ");this.selectedCardSection.className=b},n=()=>{this.selectedValue=null,m()},o=a=>{this.selectedValueShown=!!a,m()};return{showCards:(a,b={})=>{c(a,this.currentCards)||(this.currentCards=a,this.cardEventListeners=b,k())},showCardTypes:(a,b,d={})=>{c(a,this.cardTypes)&&b===this.selectedType||(this.cardTypes=a,this.selectedType=b,this.cardTypeEventListeners=d,l())},selectCard:a=>{this.selectedValue=a,this.selectedValueShown=!0,m()},clearSelectedCard:n,hideSelectedCard:()=>o(!1),showSelectedCard:()=>o(!0)}}(f,g),i=new function(a){this.view=a;const b=()=>{const a=Object.keys(e),{selectedCardType:b}=d;this.view.showCardTypes(a,b,{click:f}),this.view.showCards(d.cards,{click:c})},c=a=>{const b=d.cards[a];d.selectedCardIndex=a,this.view.selectCard(b)},f=a=>{a in e&&(d.selectedCardType=a,d.cards=e[a].cards,this.view.clearSelectedCard(),b())};return{init:()=>{d.selectedCardType="standard",d.cards=e.standard.cards,b()}}}(h);i.init()})();
